From 21e749d46b57e9335e412f11c653a6970933c237 Mon Sep 17 00:00:00 2001
From: Peter Steinberger <steipete@gmail.com>
Date: Mon, 19 Jan 2026 12:12:51 +0000
Subject: [PATCH 6/7] fix: stabilize gateway tests on windows

---
 CHANGELOG.md | 2 +-
 src/entry.ts | 5 ++---
 2 files changed, 3 insertions(+), 4 deletions(-)

diff --git a/CHANGELOG.md b/CHANGELOG.md
index 7c9e99d26..2ad3631d4 100644
--- a/CHANGELOG.md
+++ b/CHANGELOG.md
@@ -10,7 +10,7 @@ Docs: https://docs.clawd.bot
 - Docs: refresh Android node discovery docs for the Gateway WS service type.
 
 ### Fixes
-- Tests: stabilize Windows gateway/CLI tests by skipping sidecars, normalizing argv, and extending timeouts.
+- Tests: stabilize Windows gateway/CLI tests by skipping sidecars and normalizing argv.
 
 ## 2026.1.19-1
 
diff --git a/src/entry.ts b/src/entry.ts
index 45b122069..7b01bfd47 100644
--- a/src/entry.ts
+++ b/src/entry.ts
@@ -78,9 +78,8 @@ function normalizeWindowsArgv(argv: string[]): string[] {
     next = [argv[0], argv[1], ...argv.slice(3)];
   }
 
-  const filtered = next.filter((arg, index) => index === 0 || !isExecPath(arg));
-  if (filtered.length < 3) return filtered;
-  const cleaned = [...filtered];
+  if (next.length < 3) return next;
+  const cleaned = [...next];
   for (let i = 2; i < cleaned.length; ) {
     const arg = cleaned[i];
     if (!arg || arg.startsWith("-")) {
-- 
2.52.0

